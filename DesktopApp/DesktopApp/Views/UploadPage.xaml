<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:DesktopApp"
             x:Class="DesktopApp.UploadPage"
             xmlns:viewModels="clr-namespace:DesktopApp.ViewModels">


    <Shell.BackButtonBehavior>
        <BackButtonBehavior IsVisible="False" IsEnabled="False" />
    </Shell.BackButtonBehavior>

    <ContentPage.BindingContext>
        <viewModels:UploadPageViewModel/>
    </ContentPage.BindingContext>

    <Shell.TitleView>
        <Grid BackgroundColor="Transparent">
            <Grid.Background>
                <LinearGradientBrush StartPoint="0,0"
                                  EndPoint="1,1">
                    <GradientStop Color="#130D18"
                               Offset="0.1" />
                    <GradientStop Color="#372746"
                               Offset="0.6" />
                    <GradientStop Color="#392849"
                               Offset="1.0" />
                </LinearGradientBrush>
            </Grid.Background>
        </Grid>
    </Shell.TitleView>

    <Grid BackgroundColor="Transparent">
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0"
                            EndPoint="1,1">
                <GradientStop Color="#130D18"
                         Offset="0.1" />
                <GradientStop Color="#372746"
                         Offset="0.6" />
                <GradientStop Color="#392849"
                         Offset="1.0" />
            </LinearGradientBrush>
        </Grid.Background>

        <Border
            x:Name="mainBorder"
           BackgroundColor="#626064"
            StrokeDashArray="3"
            StrokeDashOffset="0"
            StrokeThickness="5"
            WidthRequest="1800"
            HeightRequest="900"
            IsVisible="True"
            >

            <Frame 
            Margin="460,0,460,20"
            BackgroundColor="Transparent"
            CornerRadius="50"
            HasShadow="False"
            Padding="0"
            BorderColor="Transparent"
            >
                <VerticalStackLayout>



                    <Label 
                HorizontalOptions="Center"
                Text="Upload"
                TextColor="DarkGray"
                FontSize="40" 
                Margin="0,200,0,0"
                x:Name="uploadText"
                IsVisible="False"
                />

                    <ImageButton 
                WidthRequest="200"
                HeightRequest="200"
                Source="cloud_upload.png"
                CornerRadius="60"
                Margin="0,0,0,0"
                x:Name="uploadButton"
                IsVisible="False"
                Clicked="OnUploadFileClicked"
                
                />

                    <Frame
                    Margin="0,100,0,0"
                    WidthRequest="600"
                    Background="#2C2C2C"
                    HeightRequest="100"
                    CornerRadius="40"
                    IsVisible="False"
                    x:Name="fileNameFrame"
                >
                        <ScrollView>
                            <Label Text="{Binding FileNamePicked}"
                            FontSize="20"
                            HorizontalOptions="Center"
                            Margin="0,0,0,0"
                            x:Name="uploadFileName"
                        />
                        </ScrollView>
                    </Frame>

                    <ImageButton  
                x:Name="plusButton"
                Source="plus_button.png"
                BorderWidth="10"
                CornerRadius="70"
                WidthRequest="200"
                Margin="0,300,0,0"
                HorizontalOptions="Center"
                Clicked="OnSelectFileClicked"
                     
            />

                    <!--<Label 
                 HorizontalOptions="Center"
                Text="Press here to select your file for uploading:"
                TextColor="DarkGray"
                FontSize="40" 
            />-->

                </VerticalStackLayout>
            </Frame>
        </Border>
        <Border
            x:Name="progressBarBorder"
           BackgroundColor="#626064"
            StrokeDashArray="3"
            StrokeDashOffset="0"
            StrokeThickness="5"
            WidthRequest="1800"
            HeightRequest="900"
            IsVisible="False"
            >
            <Frame BackgroundColor="#1F1F1F" CornerRadius="10" WidthRequest="800" HeightRequest="300">
                <Grid BackgroundColor="Transparent" WidthRequest="800" HeightRequest="300" Opacity="0.8">

                    <Label Text="Uploading Progress: " TextColor="DarkGray" FontSize="40" VerticalTextAlignment="Center" HorizontalOptions="Center" Margin="0,0,0,200"/>
                    <Frame BackgroundColor="#3A3A3A" WidthRequest="700" HeightRequest="70" >
                        <ProgressBar x:Name="progressBar" ProgressColor="#6705BC" ScaleY="4" ScaleX="1" Progress="{Binding UploadProgress}" WidthRequest="650" BackgroundColor="#5B5B5B"
                                    />
                    </Frame>
                </Grid>
            </Frame>
        </Border>
        <Border
            x:Name="loadingBorder"
            BackgroundColor="#626064"
             StrokeDashArray="3"
             StrokeDashOffset="0"
             StrokeThickness="5"
             WidthRequest="1800"
             HeightRequest="900"
             IsVisible="False"
             >
            <Frame BackgroundColor="#1F1F1F" CornerRadius="10" WidthRequest="800" HeightRequest="300">
                <Grid BackgroundColor="Transparent" WidthRequest="800" HeightRequest="300" Opacity="0.8">

                    <Label Text="Encryption Process" TextColor="DarkGray" FontSize="40" VerticalTextAlignment="Center" HorizontalOptions="Center" Margin="0,0,0,200"/>
                   
                    <ActivityIndicator Margin="0,0,0,0" WidthRequest="50" HeightRequest="50" IsRunning="True" Color="Red" HorizontalOptions="Center" VerticalOptions="Center"
/>
                   
                </Grid>
            </Frame>
        </Border>
    </Grid>
</ContentPage>
